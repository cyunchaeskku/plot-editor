
# 백엔드 structure 검토 및 재정립
- 현재 백엔드(s3 bucket, dynamodb)에 내용이 어떻게 저장되는지 구조를 파악해.
- 내가 설명하는 구조대로 되어 있지 않으면, 수정해야 해.

## Desired structure
- hierarchical structure
  - user > 작품 > [플롯, 등장인물, ...]
  - 이런 구조와 같이 작품 A가 어느 user에 의해 만들어진 작품인지, 플롯 A는 작품 C에 속한 플롯인지 작품 D에 속한 플롯인지 등 포함되는 구조를 가져야 함
  - 만약 현재 이렇게 되어 있지 않다면 수정 필요
- **현재는 인물의 대사는 단지 플롯에 적히지만, 플롯에 인물의 대사가 추가되면 이 대사가 인물 상세에서도 확인할 수 있도록 저장 구조 수정**
  - 이를 위해 인물 상세에 "대사" 항목이 추가되어야 할 것
- 저장되어야 하는 내용들 checklist. 잘 저장되고 있는지 다 파악한다
  - [ ] 사용자
  - [ ] 작품 (사용자에 속해야 함)
  - [ ] 에피소드 (작품에 속해야 함)
  - [ ] 플롯 (에피소드에 속해야 함)
  - [ ] 씬, 대사, 나레이션, 지문, 단락 등 플롯 에디터에 작성하는 내용 (플롯에 속해야 함)
  - [ ] 등장인물 (작품에 속해야 함)
  - [ ] 인물 상세에 들어가는 모든 내용 (이름, 색상, 특성, 메모, 사진, 관계, 대사, **그리고 밑에서 설명한 AI 캐릭터 요약**) (등장인물에 속해야 함)


# 백엔드 lambda에 OpenAI api 이용한 LLM 서비스 구축

---
**기술 스택**
* langchain
---
- openai api key는 코드 작성되면 내가 나중에 .env 파일에 추가할 것이니 dotenv로 env 파일에서 api key 가져오는 구조로 작성

## Desired feature
- '인물 상세' 탭 최하단에 새로운 공간 추가 - **AI 인물 요약**
  - *요약 생성* 버튼 생성
  - *요약 생성* 버튼을 누르면 이 등장인물이 속한 **작품**의 이 등장인물의 모든 대사, 등장인물의 메모, 특성, 다른 등장인물과의 관계를 context로 하여 LLM이 이 등장인물에 대한 summary를 생성한다. LLM에게 우선은 "주어진 내용을 바탕으로 이 인물의 성격, 타 인물과의 관계, 그리고 지금까지의 행보를 간단히 요약하세요" 라는 system prompt를 줘. 내가 나중에 직접 수정할 거야.