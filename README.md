# Plot Editor

시나리오 작가를 위한 3패널 플롯 편집기. 브라우저에서 바로 실행되며 데이터는 IndexedDB에 로컬 저장됩니다.

---

## 주요 기능

- **작품 / 에피소드 / 플롯** 계층 구조 관리
- **TipTap 리치 에디터** — 씬 헤딩, 대사, 내레이션, 지문 블록 지원
- **슬래시 커맨드** (`/`) 로 블록 타입 삽입
- **드래그 앤 드롭** 으로 플롯 카드 순서 변경 (dnd-kit)
- **등장인물 관리** — 색상, 특성, 메모, 사진
- **관계도 그래프** — React Flow 기반 인물 관계 시각화
- **.docx 내보내기** — 브라우저 다운로드
- **기획 문서** — 작품별 마크다운 메모 패널
- **로컬 영속 저장** — IndexedDB (서버 불필요)

---

## 화면 구성

```
Left Sidebar      │  Middle Panel    │  Right Panel
──────────────────┼──────────────────┼────────────────────
작품 / 에피소드    │  플롯 카드        │  에디터 / 인물 상세
/ 플롯 트리        │  (드래그 정렬)    │  / 관계도 그래프
등장인물           │                  │
```

---

## 기술 스택

| 역할 | 라이브러리 |
|---|---|
| UI | React 19 + TypeScript |
| 빌드 | Vite 7 |
| 스타일 | Tailwind CSS 3 |
| 상태 관리 | Zustand 5 |
| 로컬 DB | IndexedDB (idb 8) |
| 에디터 | TipTap 3 |
| 드래그 앤 드롭 | dnd-kit |
| 그래프 | React Flow 11 |
| 문서 내보내기 | docx 9 |

---

## 시작하기

```bash
# 의존성 설치
npm install

# 개발 서버 실행 (http://localhost:5173)
npm run dev

# 프로덕션 빌드
npm run build

# 빌드 결과 로컬 미리보기
npx serve dist
```

---

## 배포

`npm run build` 실행 후 생성된 `dist/` 폴더를 정적 호스팅에 업로드합니다.

- **Vercel** — 저장소 연결 또는 `dist/` 폴더 드래그 앤 드롭
- **Netlify** — 동일하게 `dist/` 드래그 앤 드롭

별도 서버 없이 정적 파일만으로 동작합니다.

---

## 데이터 저장

모든 데이터는 **브라우저 IndexedDB**에 저장됩니다.

| 상황 | 결과 |
|---|---|
| 브라우저 캐시/사이트 데이터 삭제 | 데이터 소멸 |
| 다른 브라우저 / 다른 기기 | 공유 안 됨 |
| 앱 업데이트 (JS만 변경) | 데이터 유지 |

> 중요한 작업은 `.docx 내보내기` 로 백업을 권장합니다.

---

## 프로젝트 구조

```
src/
├── db/index.ts          # IndexedDB 쿼리 + 타입 정의
├── store/index.ts       # Zustand 전역 상태
├── components/
│   ├── Sidebar/         # 좌측: 작품/에피소드/플롯 트리 + 인물 목록
│   ├── PlotPanel/       # 중앙: 플롯 카드 (드래그 정렬)
│   ├── Editor/          # 우측: TipTap 에디터 + 슬래시 메뉴
│   ├── CharacterDetail/ # 인물 상세 (특성, 관계, 사진)
│   ├── GraphView/       # 관계도 그래프
│   └── Export/          # .docx 내보내기
└── App.tsx
```
